<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <description/>
        <global>false</global>
        <ignore_in_now_experience>false</ignore_in_now_experience>
        <name>x_376096_cxp.virtual_attachments</name>
        <script><![CDATA[var x_376096_cxp=x_376096_cxp||{};x_376096_cxp.virtual_attachments=(function(){"use strict";var v={};return setTimeout(function(){var a,c=this,e=(a=c,new t(function(t){var e=new a.GlideAjax("AttachmentHelper").setScope("x_376096_cxp");e.addParam("sysparm_name","virtualAttachmentsEnabled"),e.getXMLAnswer(function(e){"true"==e&&t()})}));function h(e,t){var a=new URL(t.href).searchParams.get("sys_id");a&&a in v&&v[a].virtual&&(t.href=v[a].url,t.target="_blank")}function r(n,e){var t,a,l=e.querySelector("#attachFileCell"),d=n.document.getElementById("sys_attachment"),c=n.document.createElement("label");c.htmlFor="x_376096_cxp_virtual_url",c.classList.add("col-md-1","control-label"),c.innerText="URL";var r=n.document.createElement("input");r.id=c.htmlFor,r.type="url",r.placeholder="File URL",r.style.width="100%";var i=n.document.createElement("div");i.classList.add("col-md-8","form-field");var o=n.document.createElement("div");o.classList.add("row","form-group"),i.appendChild(r),o.appendChild(c),o.appendChild(i);e=n.document.createElement("label");e.htmlFor="x_376096_cxp_virtual_name",e.classList.add("col-md-1","control-label"),e.innerText="Name";var s=n.document.createElement("input");s.id=e.htmlFor,s.placeholder="File Name",s.style.width="100%";c=n.document.createElement("div");c.classList.add("col-md-8","form-field");i=n.document.createElement("div");i.classList.add("row","form-group");var u=n.document.createElement("input");u.id="x_376096_cxp_virtual_upload",u.style["margin-left"]="8px",u.type="button",u.value="Add",u.onclick=function(){var e=new File([r.value],s.value,{type:"text/plain"}),t=new DataTransfer;t.items.add(e);var a=n.document.getElementById("attachFile");a.file=e,a.files=t.files,u.disabled=!0,a.onchange()},c.appendChild(s),i.appendChild(e),i.appendChild(c),i.appendChild(u);var m=n.document.createElement("input");m.type="checkbox",m.style["vertical-align"]="top",m.id="x_376096_cxp_virtual_toggle",m.onchange=function(){var e=new URL(d.action);e.searchParams.set("x_376096_cxp_virtual_attachment",this.checked.toString()),d.action=e.toString();e=n.document.getElementById("loadFileXml");e&&(e.disabled=this.checked),this.checked?(t.style.display="",a.style.display="",r.focus()):(t.style.display="none",a.style.display="none")};c=n.document.createElement("div");c.style["padding-right"]="15px",c.style.float="right",c.appendChild(m),c.appendChild(n.document.createTextNode(" Virtual")),l.appendChild(c);c=n.document.createElement("td");c.colSpan="3",c.style["padding-top"]="10px",c.style["white-space"]="nowrap",c.appendChild(o),(t=n.document.createElement("tr")).style.display="none",t.appendChild(c),(a=n.document.createElement("tr")).style.display="none";c=n.document.createElement("td");c.colSpan="3",c.appendChild(i),a.appendChild(c);l=l.parentElement.parentElement;l.appendChild(t),l.appendChild(a);var p=n.refreshAttachments;n.refreshAttachments=function(){var a=arguments;_(n).then(function(){d=n.document.getElementById("sys_attachment"),r=n.document.getElementById("x_376096_cxp_virtual_url"),s=n.document.getElementById("x_376096_cxp_virtual_name");var e=n.document.getElementById("x_376096_cxp_virtual_upload");e.onclick=u.onclick,e.disabled=!1,u=e;var t=n.document.getElementById("x_376096_cxp_virtual_toggle");t.onchange=m.onchange;e=m.checked;(m=t).checked=e,m.checked&&a[0]&&(v[a[0]]={virtual:!0,url:r.value}),r.value="",s.value="",p.apply(this,a),n.document.querySelectorAll('a[href*="sys_attachment.do?sys_id="]').forEach(function(e){h(0,e)})})}}function _(a){return new t(function(n){var e=new a.GlideAjax("AttachmentHelper").setScope("x_376096_cxp");e.addParam("sysparm_name","getData");var t=[];a.document.querySelectorAll('a[href*="sys_attachment.do?sys_id="]').forEach(function(e){t.push(new URL(e.href).searchParams.get("sys_id"))}),e.addParam("ids",JSON.stringify(t)),e.getXMLAnswer(function(e){var t=JSON.parse(e);if(t)for(var a in t)v[a]=t[a];n()})})}function t(e){var t=!1,a=[];return e(function(){setTimeout(function(){for(t=!0;a.length;)a.shift()()})}),{then:function(e){t?e():a.push(e)}}}e.then(function(){_(c).then(function(){c.document.querySelectorAll('a[href*="sys_attachment.do?sys_id="]').forEach(function(e){h(0,e)})})}),-1<c.navigator.userAgent.indexOf("MSIE")||-1<c.navigator.userAgent.indexOf("Trident")||e.then(function(){var d="cxp-virtual-attachments",e=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.addedNodes)for(var n=0;n<a.addedNodes.length;n++){var l=a.addedNodes[n];"RENDERED_BODY"==l.tagName&&l.closest("#attachment")&&!l.classList.contains(d)&&(l.classList.add(d),r(c,l))}}}),t=c.document.querySelector("#attachment rendered_body");t&&!t.classList.contains(d)&&(t.classList.add(d),r(c,t)),e.observe(c.document,{childList:!0,subtree:!0})})}),{type:"virtual_attachments"}})();]]></script>
        <script_name>virtual_attachments</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-07-20 16:30:00</sys_created_on>
        <sys_id>fc84a97997bc51102f77b4b3f153af57</sys_id>
        <sys_mod_count>25</sys_mod_count>
        <sys_name>x_376096_cxp.virtual_attachments</sys_name>
        <sys_package display_value="Classic Experience" source="x_376096_cxp">3c8bfe3897ac11102f77b4b3f153af0e</sys_package>
        <sys_policy/>
        <sys_scope display_value="Classic Experience">3c8bfe3897ac11102f77b4b3f153af0e</sys_scope>
        <sys_update_name>sys_ui_script_fc84a97997bc51102f77b4b3f153af57</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-07-20 20:36:58</sys_updated_on>
        <ui_type>0</ui_type>
        <use_scoped_format>true</use_scoped_format>
    </sys_ui_script>
</record_update>
